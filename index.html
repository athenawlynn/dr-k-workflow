
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dr. K Workflow</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
const { useState, useEffect } = React;

const DailyTaskTracker = () => {
  const [tasks, setTasks] = useState([]);
  const [currentFilter, setCurrentFilter] = useState('all');
  const [activeSection, setActiveSection] = useState('tasks');
  const [expandedNotes, setExpandedNotes] = useState({});
  const [isLoading, setIsLoading] = useState(true);
  const [isSaving, setIsSaving] = useState(false);
  const [saveError, setSaveError] = useState(null);
  const [lastSaveTime, setLastSaveTime] = useState(null);
  const [editingTaskId, setEditingTaskId] = useState(null);
  
  const [darkMode, setDarkMode] = useState(() => {
    const saved = localStorage.getItem('darkMode');
    if (saved !== null) return saved === 'true';
    return window.matchMedia('(prefers-color-scheme: dark)').matches;
  });
  
  const [formData, setFormData] = useState({
    category: 'Review',
    tag: 'Office',
    description: '',
    emailLink: '',
    urgent: false,
    attachments: []
  });

  // Google Sheets API URL
  const SHEETS_API_URL = 'https://script.google.com/macros/s/AKfycbw9Ty5GgzlSW8SED_sZhkylKwYG7Dyxja6SeTlZE1-VOKdf3soajalVDDovvN6nHFS9VQ/exec';

  useEffect(() => {
    loadTasksFromStorage();
  }, []);

  // Helper function to remove duplicate tasks
  const removeDuplicateTasks = (taskList) => {
    const seen = new Map();
    return taskList.filter(task => {
      // Create key from category + tag + first 100 chars of description
      const key = task.category + '|' + task.tag + '|' + (task.description || '').substring(0, 100);
      if (seen.has(key)) {
        console.log('Duplicate removed:', task.description?.substring(0, 40));
        return false;
      }
      seen.set(key, true);
      return true;
    });
  };

  const loadTasksFromStorage = async () => {
    setIsLoading(true);
    setSaveError(null);
    try {
      const response = await fetch(SHEETS_API_URL + '?action=getTasks');
      const data = await response.json();
      if (data.success && data.tasks && data.tasks.length > 0) {
        // Remove duplicates when loading
        const uniqueTasks = removeDuplicateTasks(data.tasks);
        setTasks(uniqueTasks);
        console.log('Loaded', uniqueTasks.length, 'unique tasks');
      } else {
        setTasks([]);
      }
    } catch (error) {
      console.error('Error loading tasks:', error);
      setSaveError('Failed to load tasks. Click Sync to retry.');
      setTasks([]);
    } finally {
      setIsLoading(false);
    }
  };

  // IMPROVED SAVE FUNCTION - prevents data loss
  const saveTasksToStorage = async (tasksToSave) => {
    // CRITICAL: Don't save empty arrays - prevents wiping the sheet
    if (!tasksToSave || tasksToSave.length === 0) {
      console.log('No tasks to save - skipping to prevent data loss');
      return { success: false, error: 'No tasks to save' };
    }

    setIsSaving(true);
    setSaveError(null);
    
    // Remove duplicates before saving
    const cleanedTasks = removeDuplicateTasks(tasksToSave);
    
    // Create local backup before attempting save
    try {
      localStorage.setItem('tasks-backup-' + new Date().toISOString().split('T')[0], JSON.stringify(cleanedTasks));
      localStorage.setItem('tasks-backup-latest', JSON.stringify(cleanedTasks));
    } catch (e) {
      console.log('Local backup failed:', e);
    }
    
    try {
      const response = await fetch(SHEETS_API_URL, {
        method: 'POST',
        redirect: 'follow',
        body: JSON.stringify(cleanedTasks),
      });
      
      console.log('Tasks saved to Google Sheets:', cleanedTasks.length, 'tasks');
      setLastSaveTime(new Date().toLocaleTimeString());
      return { success: true };
    } catch (error) {
      console.error('Save error:', error.message);
      setSaveError('Save may have failed. Click Retry or Sync to verify.');
      return { success: false, error: error.message };
    } finally {
      setIsSaving(false);
    }
  };

  // Restore from local backup
  const restoreFromBackup = () => {
    const backup = localStorage.getItem('tasks-backup-latest');
    if (backup) {
      try {
        const restoredTasks = JSON.parse(backup);
        setTasks(restoredTasks);
        alert('Restored ' + restoredTasks.length + ' tasks from local backup');
      } catch (e) {
        alert('Could not restore from backup');
      }
    } else {
      alert('No backup found');
    }
  };

  const addTask = async () => {
    if (!formData.description.trim()) {
      alert('Please enter a task description');
      return;
    }
    const newTask = {
      id: Date.now(),
      ...formData,
      completed: false,
      notes: "",
      carriedOver: false
    };
    const updatedTasks = [...tasks, newTask];
    setTasks(updatedTasks);
    await saveTasksToStorage(updatedTasks);
    setFormData({ category: 'Review', tag: 'Office', description: '', emailLink: '', urgent: false, attachments: [] });
  };

  const toggleComplete = async (id) => {
    const updatedTasks = tasks.map(task => task.id === id ? { ...task, completed: !task.completed } : task);
    setTasks(updatedTasks);
    await saveTasksToStorage(updatedTasks);
  };

  const deleteTask = async (id) => {
    if (window.confirm('Delete this task?')) {
      const updatedTasks = tasks.filter(task => task.id !== id);
      setTasks(updatedTasks);
      await saveTasksToStorage(updatedTasks);
    }
  };

  const updateTaskNotes = async (id, notes) => {
    const updatedTasks = tasks.map(task => task.id === id ? { ...task, notes } : task);
    setTasks(updatedTasks);
    await saveTasksToStorage(updatedTasks);
  };

  const toggleUrgent = async (id) => {
    const updatedTasks = tasks.map(task => task.id === id ? { ...task, urgent: !task.urgent } : task);
    setTasks(updatedTasks);
    await saveTasksToStorage(updatedTasks);
  };

  const startEditTask = (task) => {
    setEditingTaskId(task.id);
    setFormData({
      category: task.category,
      tag: task.tag,
      description: task.description,
      emailLink: task.emailLink || '',
      urgent: task.urgent,
      attachments: task.attachments || []
    });
  };

  const saveEditTask = async () => {
    if (!formData.description.trim()) {
      alert('Please enter a task description');
      return;
    }
    const updatedTasks = tasks.map(task => task.id === editingTaskId ? { ...task, ...formData } : task);
    setTasks(updatedTasks);
    await saveTasksToStorage(updatedTasks);
    cancelEditTask();
  };

  const cancelEditTask = () => {
    setEditingTaskId(null);
    setFormData({ category: 'Review', tag: 'Office', description: '', emailLink: '', urgent: false, attachments: [] });
  };

  const toggleDarkMode = () => {
    const newMode = !darkMode;
    setDarkMode(newMode);
    localStorage.setItem('darkMode', newMode.toString());
  };

  const filteredTasks = currentFilter === 'all' ? tasks : tasks.filter(t => t.category === currentFilter);

  const groupTasksBySection = (taskList) => {
    const sections = {
      "THIS WEEK'S PROJECTS": [],
      "OFFICE RELATED": [],
      "FINANCE RELATED": [],
      "PERSONAL RELATED": [],
      "OTHER": []
    };
    taskList.forEach(task => {
      if (task.tag === "This Week's Projects") sections["THIS WEEK'S PROJECTS"].push(task);
      else if (task.tag === 'Finance') sections["FINANCE RELATED"].push(task);
      else if (task.tag === 'Office') sections["OFFICE RELATED"].push(task);
      else if (task.tag === 'Personal') sections["PERSONAL RELATED"].push(task);
      else sections["OTHER"].push(task);
    });
    return Object.entries(sections).filter(([_, tasks]) => tasks.length > 0);
  };

  const getSectionColor = (sectionName) => {
    if (sectionName.includes("WEEK'S PROJECTS")) return 'bg-gradient-to-r from-rose-600 to-pink-500';
    if (sectionName.includes('FINANCE')) return 'bg-gradient-to-r from-purple-600 to-purple-500';
    if (sectionName.includes('OFFICE')) return 'bg-gradient-to-r from-blue-600 to-blue-500';
    if (sectionName.includes('PERSONAL')) return 'bg-gradient-to-r from-orange-600 to-orange-500';
    return 'bg-gradient-to-r from-gray-600 to-gray-500';
  };

  const renderDescriptionWithLinks = (text) => {
    const urlRegex = /(https?:\/\/[^\s]+)/g;
    const parts = text.split(urlRegex);
    return parts.map((part, index) => {
      if (part.match(urlRegex)) {
        return <a key={index} href={part} target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:text-blue-800 underline" onClick={(e) => e.stopPropagation()}>{part.length > 50 ? part.substring(0, 50) + '...' : part}</a>;
      }
      return part;
    });
  };

  const getBadgeClass = (type, value) => {
    const classes = {
      category: {
        'Review': 'bg-pink-100 text-pink-800', 'Sign': 'bg-yellow-100 text-yellow-800',
        'Respond': 'bg-blue-100 text-blue-800', 'No Action Needed': 'bg-gray-100 text-gray-800',
        'PAY': 'bg-lime-100 text-lime-800', 'Hold': 'bg-slate-700 text-white'
      },
      tag: {
        "This Week's Projects": 'bg-rose-100 text-rose-700', 'Office': 'bg-blue-100 text-blue-700',
        'Finance': 'bg-green-100 text-green-700', 'Personal': 'bg-purple-100 text-purple-700',
        'Other': 'bg-gray-100 text-gray-700'
      }
    };
    return classes[type]?.[value] || 'bg-gray-100 text-gray-700';
  };

  const inspirationalQuotes = [
    { quote: "Feeling is the prayer.", author: "Gregg Braden" },
    { quote: "Change the way you look at things and the things you look at change.", author: "Wayne Dyer" },
    { quote: "Where focus goes, energy flows.", author: "Tony Robbins" }
  ];
  const dailyQuote = inspirationalQuotes[new Date().getDay() % inspirationalQuotes.length];
  const groupedTasks = groupTasksBySection(filteredTasks);

  return (
    <div className={`min-h-screen p-4 transition-colors ${darkMode ? 'bg-gradient-to-br from-gray-900 to-gray-800' : 'bg-gradient-to-br from-indigo-600 to-purple-700'}`}>
      <div className="max-w-6xl mx-auto">
        {/* Header */}
        <div className={`rounded-2xl shadow-2xl p-6 mb-6 ${darkMode ? 'bg-gray-800 text-white' : 'bg-white'}`}>
          <div className="flex justify-between items-center flex-wrap gap-4">
            <div>
              <h1 className={`text-3xl font-serif font-bold mb-2 ${darkMode ? 'text-white' : 'text-indigo-900'}`}>Dr. K Workflow</h1>
              <p className={darkMode ? 'text-gray-300' : 'text-gray-600'}>{new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' })}</p>
              <div className={`mt-3 p-3 rounded-lg border-l-4 ${darkMode ? 'bg-gray-700 border-purple-400' : 'bg-purple-50 border-purple-500'}`}>
                <p className={`text-sm italic ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>"{dailyQuote.quote}"</p>
                <p className={`text-xs font-semibold mt-1 ${darkMode ? 'text-purple-300' : 'text-purple-700'}`}>‚Äî {dailyQuote.author}</p>
              </div>
            </div>
            <div className="flex gap-3 items-center flex-wrap">
              {isSaving && <span className="text-sm text-yellow-600 flex items-center gap-1"><span className="animate-spin">‚è≥</span> Saving...</span>}
              {lastSaveTime && !isSaving && !saveError && <span className="text-xs text-green-600">‚úì Saved {lastSaveTime}</span>}
              {saveError && (
                <div className="flex items-center gap-2">
                  <span className="text-xs text-red-600">‚ö†Ô∏è {saveError}</span>
                  <button onClick={() => saveTasksToStorage(tasks)} className="px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200">Retry</button>
                  <button onClick={restoreFromBackup} className="px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200">Restore Backup</button>
                </div>
              )}
              <button onClick={loadTasksFromStorage} disabled={isLoading} className="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition flex items-center gap-2 disabled:opacity-50">{isLoading ? '‚è≥' : 'üîÑ'} Sync</button>
              <button onClick={toggleDarkMode} className="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition">{darkMode ? '‚òÄÔ∏è Light' : 'üåô Dark'}</button>
            </div>
          </div>
        </div>

        {/* Tasks Section */}
        <div className={`rounded-2xl shadow-2xl p-6 ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
          <h2 className={`text-2xl font-serif font-bold mb-6 pb-4 border-b-2 ${darkMode ? 'text-white border-gray-600' : 'text-indigo-900 border-gray-200'}`}>Today's Tasks</h2>

          {/* Filter Buttons */}
          <div className="flex flex-wrap gap-2 mb-4">
            {['all', 'Review', 'Sign', 'Respond', 'No Action Needed', 'PAY', 'Hold'].map(filter => (
              <button key={filter} onClick={() => setCurrentFilter(filter)} className={`px-4 py-2 rounded-lg text-sm font-medium transition ${currentFilter === filter ? 'bg-indigo-600 text-white' : darkMode ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-white border hover:bg-gray-50'}`}>{filter === 'all' ? 'All' : filter}</button>
            ))}
          </div>

          {/* Task List */}
          <div className="space-y-6">
            {isLoading ? (
              <div className="text-center py-12 text-gray-500"><div className="text-5xl mb-4 animate-spin">‚è≥</div><p>Loading tasks...</p></div>
            ) : filteredTasks.length === 0 ? (
              <div className="text-center py-12 text-gray-500"><div className="text-5xl mb-4">üìã</div><p>No tasks yet. Add your first task below!</p></div>
            ) : (
              groupedTasks.map(([sectionName, sectionTasks]) => (
                <div key={sectionName} className="mb-6">
                  <div className={`${getSectionColor(sectionName)} text-white px-4 py-3 rounded-t-lg font-bold text-sm uppercase tracking-wide shadow-md`}>{sectionName}</div>
                  <div className="space-y-3 bg-gray-50 p-4 rounded-b-lg border border-t-0">
                    {sectionTasks.map(task => (
                      <div key={task.id} className={`border rounded-xl p-4 transition ${editingTaskId === task.id ? 'bg-blue-50 border-blue-400 ring-2 ring-blue-300' : task.urgent ? 'bg-yellow-50 border-yellow-400' : 'bg-white'} ${task.completed ? 'opacity-60' : ''}`}>
                        {editingTaskId === task.id ? (
                          <div className="space-y-3">
                            <div className="flex justify-between items-center mb-2">
                              <span className="text-sm font-bold text-blue-700">‚úèÔ∏è Editing Task</span>
                              <button onClick={cancelEditTask} className="text-gray-500 hover:text-gray-700 text-lg">‚úï</button>
                            </div>
                            <div className="grid grid-cols-2 gap-2">
                              <select value={formData.category} onChange={(e) => setFormData({...formData, category: e.target.value})} className="px-2 py-1.5 border rounded text-sm">
                                <option>Review</option><option>Sign</option><option>Respond</option><option>No Action Needed</option><option>PAY</option><option>Hold</option>
                              </select>
                              <select value={formData.tag} onChange={(e) => setFormData({...formData, tag: e.target.value})} className="px-2 py-1.5 border rounded text-sm">
                                <option>This Week's Projects</option><option>Office</option><option>Finance</option><option>Personal</option><option>Other</option>
                              </select>
                            </div>
                            <textarea value={formData.description} onChange={(e) => setFormData({...formData, description: e.target.value})} className="w-full px-3 py-2 border rounded text-sm min-h-24" placeholder="Task description..." />
                            <input type="text" value={formData.emailLink} onChange={(e) => setFormData({...formData, emailLink: e.target.value})} placeholder="Email link (optional)" className="w-full px-3 py-2 border rounded text-sm" />
                            <div className="flex items-center gap-2"><input type="checkbox" checked={formData.urgent} onChange={(e) => setFormData({...formData, urgent: e.target.checked})} className="w-4 h-4" /><label className="text-sm">Mark as Urgent</label></div>
                            <div className="flex gap-2 pt-2">
                              <button onClick={saveEditTask} className="flex-1 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-medium text-sm">‚úì Save Changes</button>
                              <button onClick={cancelEditTask} className="flex-1 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 font-medium text-sm">Cancel</button>
                            </div>
                          </div>
                        ) : (
                          <>
                            <div className="flex justify-between items-start mb-2">
                              <div className="flex gap-2 flex-wrap">
                                <span className={`px-3 py-1 rounded-md text-xs font-semibold uppercase ${getBadgeClass('category', task.category)}`}>{task.category}</span>
                                <span className={`px-3 py-1 rounded-md text-xs font-semibold uppercase ${getBadgeClass('tag', task.tag)}`}>{task.tag}</span>
                                {task.carriedOver && <span className="px-3 py-1 rounded-md text-xs font-semibold uppercase bg-orange-100 text-orange-800 border border-orange-300">üìÖ Carried Over</span>}
                              </div>
                              <div className="flex gap-2">
                                <button onClick={() => startEditTask(task)} className="w-7 h-7 bg-blue-100 hover:bg-blue-200 rounded-md flex items-center justify-center text-xs" title="Edit">‚úèÔ∏è</button>
                                <button onClick={() => toggleUrgent(task.id)} className={`w-7 h-7 rounded-md flex items-center justify-center text-xs font-bold ${task.urgent ? 'bg-yellow-400 hover:bg-yellow-500 text-yellow-900' : 'bg-gray-100 hover:bg-gray-200 text-gray-600'}`} title="Toggle urgent">‚ö°</button>
                                <button onClick={() => setExpandedNotes({...expandedNotes, [task.id]: !expandedNotes[task.id]})} className="w-7 h-7 bg-gray-100 hover:bg-gray-200 rounded-md flex items-center justify-center text-xs" title="Notes">üí¨</button>
                                <button onClick={() => toggleComplete(task.id)} className="w-7 h-7 bg-gray-100 hover:bg-gray-200 rounded-md flex items-center justify-center" title="Complete">{task.completed ? '‚úì' : '‚óã'}</button>
                                <button onClick={() => deleteTask(task.id)} className="w-7 h-7 bg-gray-100 hover:bg-gray-200 rounded-md flex items-center justify-center" title="Delete">√ó</button>
                              </div>
                            </div>
                            <p className={`text-sm leading-relaxed mb-2 ${task.completed ? 'line-through' : ''}`}>{renderDescriptionWithLinks(task.description)}</p>
                            {task.emailLink && <a href={task.emailLink} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-2 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-xs font-semibold rounded-lg mt-2" onClick={(e) => e.stopPropagation()}>üìß View Email</a>}
                            {expandedNotes[task.id] && (
                              <div className="mt-3 pt-3 border-t">
                                <label className="block text-xs font-semibold text-gray-600 uppercase mb-2">üìù Notes / Instructions</label>
                                <textarea value={task.notes || ''} onChange={(e) => updateTaskNotes(task.id, e.target.value)} placeholder="Add notes..." className="w-full px-3 py-2 border rounded-lg text-sm min-h-20 bg-blue-50 border-blue-200 focus:border-blue-400 focus:outline-none" />
                              </div>
                            )}
                            {task.notes && !expandedNotes[task.id] && <div className="mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-900"><strong>üí¨ Note:</strong> {task.notes.substring(0, 60)}{task.notes.length > 60 ? '...' : ''}</div>}
                          </>
                        )}
                      </div>
                    ))}
                  </div>
                </div>
              ))
            )}
          </div>

          {/* Status Dashboard */}
          <div className="bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-xl p-5 my-6">
            <h3 className="text-sm font-bold text-indigo-900 uppercase tracking-wide mb-3">üìä Current Status</h3>
            <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
              <div className="bg-white rounded-lg p-3 text-center shadow-sm"><div className="text-2xl font-bold text-indigo-600">{tasks.length}</div><div className="text-xs text-gray-600 font-semibold">Total Tasks</div></div>
              <div className="bg-white rounded-lg p-3 text-center shadow-sm"><div className="text-2xl font-bold text-green-600">{tasks.filter(t => t.completed).length}</div><div className="text-xs text-gray-600 font-semibold">Completed</div></div>
              <div className="bg-white rounded-lg p-3 text-center shadow-sm"><div className="text-2xl font-bold text-yellow-600">{tasks.filter(t => t.urgent && !t.completed).length}</div><div className="text-xs text-gray-600 font-semibold">‚ö° Urgent</div></div>
              <div className="bg-white rounded-lg p-3 text-center shadow-sm"><div className="text-2xl font-bold text-amber-600">{tasks.filter(t => t.carriedOver && !t.completed).length}</div><div className="text-xs text-gray-600 font-semibold">üìÖ Carried Over</div></div>
            </div>
            <div className="mt-4">
              <div className="flex justify-between text-xs text-gray-600 mb-1"><span className="font-semibold">Progress</span><span className="font-semibold">{tasks.length > 0 ? Math.round((tasks.filter(t => t.completed).length / tasks.length) * 100) : 0}%</span></div>
              <div className="w-full bg-gray-200 rounded-full h-3 overflow-hidden"><div className="bg-gradient-to-r from-green-500 to-green-600 h-3 rounded-full transition-all duration-500" style={{width: `${tasks.length > 0 ? (tasks.filter(t => t.completed).length / tasks.length) * 100 : 0}%`}}></div></div>
            </div>
          </div>

          {/* Add Task Form */}
          <div className="mt-8 pt-6 border-t-2 border-gray-200">
            <h3 className={`text-xl font-serif font-bold mb-4 ${darkMode ? 'text-white' : 'text-indigo-900'}`}>‚ûï Add New Task (Athena)</h3>
            <div className="bg-gray-50 rounded-xl p-5">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
                <div>
                  <label className="block text-xs font-semibold text-gray-600 uppercase mb-2">Category</label>
                  <select value={formData.category} onChange={(e) => setFormData({...formData, category: e.target.value})} className="w-full px-3 py-2 border rounded-lg text-sm">
                    <option>Review</option><option>Sign</option><option>Respond</option><option>No Action Needed</option><option>PAY</option><option>Hold</option>
                  </select>
                </div>
                <div>
                  <label className="block text-xs font-semibold text-gray-600 uppercase mb-2">Tag</label>
                  <select value={formData.tag} onChange={(e) => setFormData({...formData, tag: e.target.value})} className="w-full px-3 py-2 border rounded-lg text-sm">
                    <option>This Week's Projects</option><option>Office</option><option>Finance</option><option>Personal</option><option>Other</option>
                  </select>
                </div>
              </div>
              <div className="mb-3">
                <label className="block text-xs font-semibold text-gray-600 uppercase mb-2">Task Description</label>
                <textarea value={formData.description} onChange={(e) => setFormData({...formData, description: e.target.value})} placeholder="Enter task details..." className="w-full px-3 py-2 border rounded-lg text-sm min-h-20" />
              </div>
              <div className="mb-3">
                <label className="block text-xs font-semibold text-gray-600 uppercase mb-2">üìß Email Link (Optional)</label>
                <input type="text" value={formData.emailLink} onChange={(e) => setFormData({...formData, emailLink: e.target.value})} placeholder="Paste Gmail link here" className="w-full px-3 py-2 border rounded-lg text-sm" />
              </div>
              <div className="flex items-center gap-2 mb-3">
                <input type="checkbox" checked={formData.urgent} onChange={(e) => setFormData({...formData, urgent: e.target.checked})} className="w-4 h-4" />
                <label className="text-sm">Mark as Urgent (Yellow highlight)</label>
              </div>
              {editingTaskId ? (
                <div className="p-3 bg-blue-100 border border-blue-300 rounded-lg text-sm text-blue-800">‚úèÔ∏è Currently editing a task above. Save or cancel to add a new task.</div>
              ) : (
                <button onClick={addTask} className="w-full py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium">‚ûï Add Task</button>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<DailyTaskTracker />);
  </script>
</body>
</html>
